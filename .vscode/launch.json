{
  "version": "0.2.0",
  "inputs": [
    {
      "id": "test-filter",
      "type": "promptString",
      "default": "*",
      "description": "The filter pattern for GTest"
    },
    {
      "id": "expression",
      "type": "promptString",
      "default": "(+ 99 1)",
      "description": "The expression to evaluate"
    },
    {
      "id": "even-value",
      "type": "promptString",
      "default": "10",
      "description": "A value that is even."
    },
    {
      "id": "test-suite",
      "type":"pickString",
      "description": "The test suite to run",
      "options": [
        "Lexer",
        "Parser",
        "LocalVariable",
        "LocalScope",
        "FlowGraph"
      ]
    },
    {
      "id": "verbose-level",
      "type": "pickString",
      "description": "The verbose level to use",
      "default": "0",
      "options": [
        "0",
        "10",
        "100",
        "1000",
      ]
    }
  ],
  "configurations": [
    {
      "name": "Run All Tests",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Tests/scheme-tests",
      "args": [
        "--gtest_color=yes",
        "-logtostdout",
        "-colorlogtostdout"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Run Tests",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Tests/scheme-tests",
      "args": [
        "--gtest_filter=${input:test-filter}",
        "--gtest_color=yes",
        "-logtostdout",
        "-colorlogtostdout"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Run Test Suite",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Tests/scheme-tests",
      "args": [
        "--gtest_filter=${input:test-suite}Test*",
        "--gtest_color=yes",
        "-logtostdout",
        "-colorlogtostdout"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "REPL",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--reports-dir", "${workspaceFolder}/reports",
        "--module-dir", "${workspaceFolder}/scm",
        "-v=${input:verbose-level}"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ],
      "env": {
        "TERM": "xterm-256color"
      }
    },
    {
      "name": "REPL (No Kernel)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--reports-dir", "${workspaceFolder}/reports",
        "--module-dir", "${workspaceFolder}/scm",
        "--dump-ast",
        "--dump-flow-graph",
        "--nokernel",
        "-v=${input:verbose-level}"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ],
      "env": {
        "TERM": "xterm-256color"
      }
    },
    {
      "name": "Eval Expr",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--expr", "${input:expression}",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
        "--module-dir", "${workspaceFolder}/scm",
         "-v=${input:verbose-level}"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval Expr (No Eval)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--expr", "${input:expression}",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
        "--module-dir", "${workspaceFolder}/scm",
        "--noeval"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
        {
      "name": "Eval Expr (No Kernel)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--expr", "${input:expression}",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
        "--module-dir", "${workspaceFolder}/scm",
        "--nokernel"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval Expr (No Kernel)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--expr", "${input:expression}",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
        "--module-dir", "${workspaceFolder}/scm",
        "--nokernel"
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval Basic Cond Expr (Debug)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--expr", "(cond #t 10 0)",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval Sq Expr (Debug)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--expr", "(begin (define sq (lambda (x) (* x x))) (sq 10))",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval Empty Module",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--module", "(defmodule test)",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval Test Module",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--module", "(defmodule test (define test #t))",
        "--reports-dir", "${workspaceFolder}/reports",
        "--expr", "(print test)",
        "--dump-ast",
        "--dump-flow-graph",
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
    {
      "name": "Eval even? Expr (Debug)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/build/Sources/scm",
      "args": [
        "-logtostdout",
        "-colorlogtostdout",
        "--reports-dir", "${workspaceFolder}/reports",
        "--dump-ast",
        "--dump-flow-graph",
        "--module-dir", "${workspaceFolder}/scm",
        "--expr", "(begin (define value ${input:even-value}) (print (cond (even? value) \"even\" \"odd\")))",
      ],
      "cwd": "${workspaceFolder}",
      "initCommands": [
        "command source ${workspaceFolder}/.lldbinit"
      ]
    },
  ]
}